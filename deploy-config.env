# ============================================
# CONFIGURACIÓN DE DEPLOYMENT - SAAS PLATFORM
# ============================================
# Este archivo define QUÉ servicios desplegar y CÓMO
# Es el único archivo que debes editar para controlar deployments

# ============================================
# SERVIDOR VPS (solo para remote-deploy.sh/.bat)
# ============================================
VPS_HOST=72.62.174.193
VPS_USER=root
VPS_PATH=/opt/saas-platform
VPS_SSH_PORT=22

# ⚠️ PASSWORD: Solo se usa en Windows (.bat)
# Linux/Mac usan SSH keys configuradas con: ./remote-deploy.sh --setup-ssh
VPS_PASSWORD=H;v1c-#-b,9DlzMRj;L3

# ============================================
# CAPA 1: INFRAESTRUCTURA (Siempre primero)
# ============================================

# MySQL
DEPLOY_MYSQL=true
SERVICE_PORT_MYSQL=3306
SERVICE_DEPS_MYSQL=""

# Config Server
DEPLOY_CONFIG_SERVER=true
SERVICE_PORT_CONFIG_SERVER=8888
SERVICE_DEPS_CONFIG_SERVER=""

# Discovery Service (Eureka)
DEPLOY_DISCOVERY_SERVICE=true
SERVICE_PORT_DISCOVERY_SERVICE=8761
SERVICE_DEPS_DISCOVERY_SERVICE="config-server"

# ============================================
# CAPA 2: MICROSERVICIOS DE NEGOCIO
# ============================================

# Auth Service
DEPLOY_AUTH_SERVICE=true
SERVICE_PORT_AUTH_SERVICE=8082
SERVICE_DEPS_AUTH_SERVICE="mysql config-server discovery-service"

# System Service
DEPLOY_SYSTEM_SERVICE=true
SERVICE_PORT_SYSTEM_SERVICE=8083
SERVICE_DEPS_SYSTEM_SERVICE="mysql config-server discovery-service"

# ============================================
# CAPA 3: GATEWAY (Siempre último)
# ============================================

# Gateway Service
DEPLOY_GATEWAY_SERVICE=true
SERVICE_PORT_GATEWAY_SERVICE=8080
SERVICE_DEPS_GATEWAY_SERVICE="config-server discovery-service auth-service system-service"

# ============================================
# AGREGAR NUEVOS MICROSERVICIOS AQUÍ
# ============================================
# Template (copia y adapta):
#
# DEPLOY_MI_NUEVO_SERVICIO=true
# SERVICE_PORT_MI_NUEVO_SERVICIO=8089
# SERVICE_DEPS_MI_NUEVO_SERVICIO="mysql config-server discovery-service"

# ============================================
# OPCIONES DE BUILD
# ============================================

# FORCE_REBUILD: Reconstruir todo sin caché
# true  = Lento pero seguro (15-20 min) - Usar después de cambios importantes
# false = Rápido con caché (5-10 min) - Usar para cambios menores
FORCE_REBUILD=false

# ============================================
# OPCIONES DE BACKUP
# ============================================

# SKIP_BACKUP: Saltar backup de MySQL antes de desplegar
# true  = NO hacer backup (solo para desarrollo/testing)
# false = HACER backup antes de desplegar (RECOMENDADO en producción)
SKIP_BACKUP=false

# ============================================
# OPCIONES DE GIT
# ============================================

# AUTO_PULL: Actualizar código desde Git antes de desplegar
# true  = git pull automático desde GIT_BRANCH
# false = usar código local actual (útil para testing local)
AUTO_PULL=true

# GIT_BRANCH: Rama a desplegar
GIT_BRANCH=main

# ============================================
# OPCIONES DE DESPLIEGUE
# ============================================

# RUN_MIGRATIONS: Ejecutar migraciones de base de datos
RUN_MIGRATIONS=true

# SHOW_LOGS: Mostrar logs después del deployment
SHOW_LOGS=true

# ============================================
# HEALTH CHECKS
# ============================================

# HEALTH_CHECK_TIMEOUT: Segundos máximos para esperar que un servicio esté healthy
HEALTH_CHECK_TIMEOUT=120

# HEALTH_CHECK_INTERVAL: Segundos entre intentos de health check
HEALTH_CHECK_INTERVAL=5

