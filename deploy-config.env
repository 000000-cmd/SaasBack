# ============================================
# CONFIGURACION DE DEPLOYMENT - SAAS PLATFORM
# Linea Base para Microservicios
# ============================================
# Este archivo define QUE servicios desplegar y COMO
# Es el unico archivo que debes editar para controlar deployments
# ============================================

# ============================================
# SERVIDOR VPS (solo para remote-deploy.sh/.bat)
# ============================================
VPS_HOST=72.62.174.193
VPS_USER=root
VPS_PATH=/opt/saas-platform
VPS_SSH_PORT=22

# PASSWORD: Solo se usa en Windows (.bat)
# Linux/Mac usan SSH keys configuradas con: ./remote-deploy.sh --setup-ssh
# IMPORTANTE: Cambiar en produccion y no commitear este archivo
VPS_PASSWORD="H;v1c-#-b,9DlzMRj;L3"

# ============================================
# CAPA 1: INFRAESTRUCTURA (Siempre primero)
# ============================================

# MySQL - Base de datos principal
DEPLOY_MYSQL=true
SERVICE_PORT_MYSQL=3306
SERVICE_DEPS_MYSQL=""
SERVICE_HEALTH_TIMEOUT_MYSQL=40

# Config Server - Configuracion centralizada
DEPLOY_CONFIG_SERVER=true
SERVICE_PORT_CONFIG_SERVER=8888
SERVICE_DEPS_CONFIG_SERVER=""
SERVICE_HEALTH_TIMEOUT_CONFIG_SERVER=30

# Discovery Service (Eureka) - Registro de servicios
DEPLOY_DISCOVERY_SERVICE=true
SERVICE_PORT_DISCOVERY_SERVICE=8761
SERVICE_DEPS_DISCOVERY_SERVICE="config-server"
SERVICE_HEALTH_TIMEOUT_DISCOVERY_SERVICE=40

# ============================================
# CAPA 2: MICROSERVICIOS DE NEGOCIO
# ============================================

# Auth Service - Autenticacion, login, usuarios
DEPLOY_AUTH_SERVICE=true
SERVICE_PORT_AUTH_SERVICE=8082
SERVICE_DEPS_AUTH_SERVICE="mysql config-server discovery-service"
SERVICE_HEALTH_TIMEOUT_AUTH_SERVICE=50

# System Service - Configuracion del sistema, listas, menus, constantes
DEPLOY_SYSTEM_SERVICE=true
SERVICE_PORT_SYSTEM_SERVICE=8083
SERVICE_DEPS_SYSTEM_SERVICE="mysql config-server discovery-service"
SERVICE_HEALTH_TIMEOUT_SYSTEM_SERVICE=50

# ============================================
# CAPA 3: GATEWAY (Siempre ultimo)
# ============================================

# Gateway Service - Punto de entrada, routing, JWT validation
DEPLOY_GATEWAY_SERVICE=true
SERVICE_PORT_GATEWAY_SERVICE=8080
SERVICE_DEPS_GATEWAY_SERVICE="config-server discovery-service auth-service system-service"
SERVICE_HEALTH_TIMEOUT_GATEWAY_SERVICE=40

# ============================================
# TEMPLATE: AGREGAR NUEVOS MICROSERVICIOS
# ============================================
# Copia y adapta estas lineas para nuevos servicios:
#
# DEPLOY_MI_NUEVO_SERVICIO=true
# SERVICE_PORT_MI_NUEVO_SERVICIO=8089
# SERVICE_DEPS_MI_NUEVO_SERVICIO="mysql config-server discovery-service"
# SERVICE_HEALTH_TIMEOUT_MI_NUEVO_SERVICIO=50

# ============================================
# OPCIONES DE BUILD
# ============================================

# FORCE_REBUILD: Reconstruir todo sin cache
# true  = Lento pero seguro (15-20 min) - Usar despues de cambios importantes en dependencias
# false = Rapido con cache (5-10 min) - Usar para cambios en codigo
FORCE_REBUILD=false

# ============================================
# OPCIONES DE BACKUP
# ============================================

# SKIP_BACKUP: Saltar backup de MySQL antes de desplegar
# true  = NO hacer backup (solo para desarrollo/testing)
# false = HACER backup antes de desplegar (RECOMENDADO en produccion)
SKIP_BACKUP=false

# BACKUP_RETENTION_DAYS: Dias que se mantienen los backups
BACKUP_RETENTION_DAYS=7

# ============================================
# OPCIONES DE GIT
# ============================================

# AUTO_PULL: Actualizar codigo desde Git antes de desplegar
# true  = git pull automatico desde GIT_BRANCH
# false = usar codigo local actual (util para testing local)
AUTO_PULL=true

# GIT_BRANCH: Rama a desplegar
GIT_BRANCH=main

# ============================================
# OPCIONES DE DESPLIEGUE
# ============================================

# RUN_MIGRATIONS: Ejecutar migraciones de base de datos (futuro)
RUN_MIGRATIONS=true

# SHOW_LOGS: Mostrar logs despues del deployment
SHOW_LOGS=true

# ENABLE_ROLLBACK: Habilitar rollback automatico en caso de fallo
ENABLE_ROLLBACK=true

# ============================================
# HEALTH CHECKS
# ============================================

# HEALTH_CHECK_TIMEOUT: Segundos maximos para esperar que un servicio este healthy
HEALTH_CHECK_TIMEOUT=120

# HEALTH_CHECK_INTERVAL: Segundos entre intentos de health check
HEALTH_CHECK_INTERVAL=5

# ============================================
# NOTIFICACIONES (Futuro)
# ============================================

# SLACK_WEBHOOK: URL del webhook de Slack para notificaciones
# SLACK_WEBHOOK=https://hooks.slack.com/services/XXX/YYY/ZZZ

# EMAIL_NOTIFY: Email para notificaciones de deployment
# EMAIL_NOTIFY=admin@empresa.com

# ============================================
# RECURSOS (Para servidores con recursos limitados)
# ============================================

# LIMIT_MEMORY: Limitar memoria por contenedor (ej: 512m, 1g)
# LIMIT_MEMORY=512m

# LIMIT_CPU: Limitar CPU por contenedor (ej: 0.5, 1.0)
# LIMIT_CPU=0.5

