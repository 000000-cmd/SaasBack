server.port=8080

# ==========================================
# OPTIMIZACIÓN (Sin Base de Datos)
# ==========================================
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
  org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# ==========================================
# DISCOVERY LOCATOR (Rutas Dinámicas)
# ==========================================
# Habilita el enrutamiento automático basado en servicios registrados en Eureka
spring.cloud.gateway.discovery.locator.enabled=true
# Convierte nombres de servicios a minúsculas (AUTH-SERVICE -> /auth-service)
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# ==========================================
# RUTAS PERSONALIZADAS (Opcional)
# ==========================================
# Puedes definir rutas manuales aquí si necesitas control fino
# spring.cloud.gateway.routes[0].id=auth-service
# spring.cloud.gateway.routes[0].uri=lb://auth-service
# spring.cloud.gateway.routes[0].predicates[0]=Path=/api/auth/**

# ==========================================
# CORS GLOBAL
# ==========================================
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origins=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].max-age=3600

# ==========================================
# TIMEOUTS Y CONFIGURACIÓN HTTP
# ==========================================
# Timeout de conexión (5 segundos)
spring.cloud.gateway.httpclient.connect-timeout=20000
# Timeout de respuesta (5 segundos)
spring.cloud.gateway.httpclient.response-timeout=30s
# Pool de conexiones
spring.cloud.gateway.httpclient.pool.type=elastic
spring.cloud.gateway.httpclient.pool.max-connections=500
spring.cloud.gateway.httpclient.pool.max-idle-time=30s

# ==========================================
# CIRCUIT BREAKER (Resilencia)
# ==========================================
# Si necesitas circuit breaker, descomentar:
# spring.cloud.gateway.default-filters[0]=CircuitBreaker
# resilience4j.circuitbreaker.instances.default.failure-rate-threshold=50
# resilience4j.circuitbreaker.instances.default.wait-duration-in-open-state=10000

# ==========================================
# RATE LIMITING (Opcional)
# ==========================================
# Si necesitas rate limiting, descomentar:
# spring.cloud.gateway.default-filters[0]=RequestRateLimiter
# spring.cloud.gateway.default-filters[0].args.redis-rate-limiter.replenishRate=10
# spring.cloud.gateway.default-filters[0].args.redis-rate-limiter.burstCapacity=20

# ==========================================
# LOGGING
# ==========================================
logging.level.root=INFO
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.reactor.netty=INFO
logging.level.io.netty=INFO
logging.level.com.saas.gatewayservice=DEBUG

# ==========================================
# ACTUATOR
# ==========================================
management.endpoints.web.exposure.include=health,info,metrics,gateway
management.endpoint.health.show-details=always
management.endpoint.gateway.enabled=true

# ==========================================
# MÉTRICAS (Opcional)
# ==========================================
management.metrics.tags.application=${spring.application.name}
management.metrics.export.prometheus.enabled=false