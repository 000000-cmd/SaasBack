server.port=8080

# ==========================================
# 1. OPTIMIZACIÓN (Cero Base de Datos)
# ==========================================
# El Gateway es solo enrutador, no debe abrir conexiones a MySQL
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# ==========================================
# 2. ENRUTAMIENTO DINÁMICO (Modo Incofin)
# ==========================================
# Habilita la "magia": Crea rutas basadas en los nombres de Eureka
# ACTUALIZADO: Nuevas propiedades de Spring Cloud Gateway WebFlux
spring.cloud.gateway.server.webflux.discovery.locator.enabled=true
# Convierte nombres a minúsculas (AUTH-SERVICE -> /auth-service/...)
spring.cloud.gateway.server.webflux.discovery.locator.lower-case-service-id=true

# ==========================================
# 3. SEGURIDAD (CORS Global)
# ==========================================
# Permite que el Frontend (Angular/React) llame a cualquier microservicio a través del Gateway
# ACTUALIZADO: Nuevas propiedades de CORS en WebFlux
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowed-origins=*
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.server.webflux.globalcors.cors-configurations.[/**].allowed-headers=*

# ==========================================
# 4. TIMEOUTS (Resiliencia)
# ==========================================
# Si un microservicio tarda más de 5s, el Gateway corta la llamada
# ACTUALIZADO: Nuevas propiedades de HTTP client en WebFlux
spring.cloud.gateway.server.webflux.httpclient.connect-timeout=5000
spring.cloud.gateway.server.webflux.httpclient.response-timeout=5s