server.port=8080

# ==========================================
# OPTIMIZACIÓN (Sin Base de Datos)
# ==========================================
spring.autoconfigure.exclude=\
  org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\
  org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration

# ==========================================
# DISCOVERY LOCATOR (Rutas Dinámicas)
# ==========================================
spring.cloud.gateway.discovery.locator.enabled=true
spring.cloud.gateway.discovery.locator.lower-case-service-id=true

# ==========================================
# CORS GLOBAL - CORREGIDO
# ==========================================
# Usar allowed-origin-patterns en lugar de allowed-origins para soportar wildcards con credentials
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-origin-patterns=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
spring.cloud.gateway.globalcors.cors-configurations.[/**].allowed-headers=*
spring.cloud.gateway.globalcors.cors-configurations.[/**].allow-credentials=true
spring.cloud.gateway.globalcors.cors-configurations.[/**].exposed-headers=Authorization,X-User-Username,X-User-Id,X-User-Roles
spring.cloud.gateway.globalcors.cors-configurations.[/**].max-age=3600

# ==========================================
# TIMEOUTS Y CONFIGURACIÓN HTTP
# ==========================================
spring.cloud.gateway.httpclient.connect-timeout=20000
spring.cloud.gateway.httpclient.response-timeout=30s
spring.cloud.gateway.httpclient.pool.type=elastic
spring.cloud.gateway.httpclient.pool.max-connections=500
spring.cloud.gateway.httpclient.pool.max-idle-time=30s

# ==========================================
# LOGGING
# ==========================================
logging.level.root=INFO
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.reactor.netty=DEBUG
logging.level.io.netty=INFO
logging.level.com.saas.gatewayservice=DEBUG

# ==========================================
# ACTUATOR
# ==========================================
management.endpoints.web.exposure.include=health,info,metrics,gateway
management.endpoint.health.show-details=always
management.endpoint.gateway.enabled=true
management.metrics.tags.application=${spring.application.name}